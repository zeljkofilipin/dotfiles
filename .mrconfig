# default

[DEFAULT]
lib =
  update_git_repository () {
    git checkout master &&
    git branch | grep -vE 'master|cloudbees' | xargs git branch -D &&
    git pull origin master
  }
  install_ruby_gems () {
    cd tests/browser &&
    bundle
  }



# update rubygems, bundler, homebrew and tools installed via homebrew

[/Users/z]
update =
  gem update --system &&
  gem update bundler
  brew update &&
  brew upgrade



# integration

[Dropbox/wmf/integration/jenkins]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/integration/jenkins' 'jenkins'
update = update_git_repository

[Dropbox/wmf/integration/jenkins-job-builder]
checkout = git clone 'https://gerrit.wikimedia.org/r/p/integration/jenkins-job-builder.git' 'jenkins-job-builder'
update =
  if [ -d ~/Dropbox/wmf/integration/jenkins-job-builder/output ]; then rm -rv ~/Dropbox/wmf/integration/jenkins-job-builder/output; fi &&
  if [ -d ~/Dropbox/wmf/integration/jenkins-job-builder/output_ ]; then rm -rv ~/Dropbox/wmf/integration/jenkins-job-builder/output_; fi &&
  update_git_repository

[Dropbox/wmf/integration/jenkins-job-builder/config]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/integration/jenkins-job-builder-config' 'config'
update =
  update_git_repository &&
  git checkout cloudbees &&
  git pull origin cloudbees

[Dropbox/wmf/integration/zuul-config]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/integration/zuul-config' 'zuul-config'
update = update_git_repository



# labs

[Dropbox/wmf/labs/tools/grrrit]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/labs/tools/grrrit' 'grrrit'
update = update_git_repository



# mediawiki

[Dropbox/wmf/mediawiki/core]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/core' 'core'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/ruby/api]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/ruby/api' 'api'
update =
  update_git_repository &&
  bundle

[Dropbox/wmf/mediawiki/selenium]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/selenium' 'selenium'
update =
  update_git_repository &&
  bundle

[Dropbox/wmf/mediawiki/vagrant]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/vagrant.git' 'vagrant'
update = update_git_repository



# mediawiki/extensions

[Dropbox/wmf/mediawiki/extensions/ArticleFeedbackv5]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ArticleFeedbackv5' 'ArticleFeedbackv5'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/CentralAuth]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/CentralAuth' 'CentralAuth'
update = update_git_repository

[Dropbox/wmf/mediawiki/extensions/CirrusSearch]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/CirrusSearch' 'CirrusSearch'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/ContentTranslation]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ContentTranslation' 'ContentTranslation'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/Flow]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/Flow' 'Flow'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/GettingStarted]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/GettingStarted' 'GettingStarted'
update = update_git_repository

[Dropbox/wmf/mediawiki/extensions/MobileFrontend]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/MobileFrontend.git' 'MobileFrontend'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/MultimediaViewer]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/MultimediaViewer' 'MultimediaViewer'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/PageTriage]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/PageTriage' 'PageTriage'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/Translate]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/Translate' 'Translate'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/TwnMainPage]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/TwnMainPage' 'TwnMainPage'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/UniversalLanguageSelector]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/UniversalLanguageSelector.git' 'UniversalLanguageSelector'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/UploadWizard]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/UploadWizard' 'UploadWizard'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/VisualEditor]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/VisualEditor' 'VisualEditor'
update =
  update_git_repository &&
  cd modules/ve-mw/tests/browser &&
  bundle

[Dropbox/wmf/mediawiki/extensions/WikiLove]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/WikiLove' 'WikiLove'
update =
  update_git_repository &&
  install_ruby_gems

[Dropbox/wmf/mediawiki/extensions/ZeroBanner]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ZeroBanner' 'ZeroBanner'
update =
  update_git_repository &&
  install_ruby_gems



# wmde

[Dropbox/wmf/wmde/jenkins-job-builder-config]
checkout = git clone 'https://github.com/wmde/jenkins-job-builder-config.git' 'jenkins-job-builder-config'
update = update_git_repository

[Dropbox/wmf/wmde/WikidataBrowserTests]
checkout = git clone 'git@github.com:wmde/WikidataBrowserTests.git' 'WikidataBrowserTests'
update =
  update_git_repository &&
  bundle

