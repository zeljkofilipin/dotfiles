# default

[DEFAULT]
lib = 
	 update_git_repository () {
	   git checkout master &&
	   git branch | grep -vE 'master' | xargs git branch -D &&
	   git pull origin master
	 }
	 install_ruby_gems () {
	   bundle
	 }



# update rubygems, bundler, homebrew and tools installed via homebrew

[/Users/z]
update = 
	 gem update --system &&
	 gem update bundler &&
	 brew update &&
	 brew upgrade



# integration

[Documents/wmf/integration/jenkins]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/integration/jenkins' 'jenkins'
update = update_git_repository

[Documents/wmf/integration/jenkins-job-builder]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/integration/jenkins-job-builder' 'jenkins-job-builder'
update = 
	 if [ -d ~/Documents/wmf/integration/jenkins-job-builder/output ]; then rm -rv ~/Documents/wmf/integration/jenkins-job-builder/output; fi &&
	 if [ -d ~/Documents/wmf/integration/jenkins-job-builder/output_ ]; then rm -rv ~/Documents/wmf/integration/jenkins-job-builder/output_; fi &&
	 update_git_repository

[Documents/wmf/integration/jenkins-job-builder/config]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/integration/config' 'config'
update = update_git_repository



# labs

[Documents/wmf/labs/tools/grrrit]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/labs/tools/grrrit' 'grrrit'
update = update_git_repository



# mediawiki

[Documents/wmf/mediawiki/core]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/core' 'core'
update = 
	 update_git_repository &&
	 cd tests/browser &&
	 bundle

[Documents/wmf/mediawiki/ruby/api]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/ruby/api' 'api'
update = 
	 update_git_repository &&
	 bundle

[Documents/wmf/mediawiki/selenium]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/selenium' 'selenium'
update = 
	 update_git_repository &&
	 bundle

[Documents/wmf/mediawiki/vagrant]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/vagrant' 'vagrant'
update = 
	 update_git_repository &&
	 git submodule update --init --recursive
	 ./setup.sh

[Documents/wmf/mediawiki/vagrant/mediawiki]
checkout = git clone 'https://gerrit.wikimedia.org/r/p/mediawiki/core.git' 'mediawiki'
update = update_git_repository



# mediawiki/extensions

[Documents/wmf/mediawiki/extensions/ArticleFeedbackv5]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ArticleFeedbackv5' 'ArticleFeedbackv5'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/CentralAuth]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/CentralAuth' 'CentralAuth'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/CirrusSearch]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/CirrusSearch' 'CirrusSearch'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/ContentTranslation]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ContentTranslation' 'ContentTranslation'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/Echo]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/Echo' 'Echo'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/Flow]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/Flow' 'Flow'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/GettingStarted]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/GettingStarted' 'GettingStarted'
update = update_git_repository

[Documents/wmf/mediawiki/extensions/Math]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/Math' 'Math'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/MobileFrontend]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/MobileFrontend' 'MobileFrontend'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/MultimediaViewer]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/MultimediaViewer' 'MultimediaViewer'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/PageTriage]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/PageTriage' 'PageTriage'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/PdfHandler]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/PdfHandler' 'PdfHandler'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/Translate]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/Translate' 'Translate'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/TwnMainPage]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/TwnMainPage' 'TwnMainPage'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/UniversalLanguageSelector]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/UniversalLanguageSelector' 'UniversalLanguageSelector'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/UploadWizard]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/UploadWizard' 'UploadWizard'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/VisualEditor]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/VisualEditor' 'VisualEditor'
update = 
	 update_git_repository &&
	 cd modules/ve-mw/tests/browser &&
	 bundle

[Documents/wmf/mediawiki/extensions/WikiLove]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/WikiLove' 'WikiLove'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/ZeroBanner]
checkout = git clone 'ssh://Zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ZeroBanner' 'ZeroBanner'
update = 
	 update_git_repository &&
	 install_ruby_gems

[Documents/wmf/mediawiki/extensions/ZeroPortal]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/mediawiki/extensions/ZeroPortal' 'ZeroPortal'
update = 
	 update_git_repository &&
	 install_ruby_gems



# operations
#
[Documents/wmf/operations/puppet]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/operations/puppet' 'puppet'
update = 
	   git checkout production &&
	   git branch | grep -vE 'production' | xargs git branch -D &&
	   git pull origin production



# VisualEditor
#
[Documents/wmf/VisualEditor/VisualEditor]
checkout = git clone 'ssh://zfilipin@gerrit.wikimedia.org:29418/VisualEditor/VisualEditor' 'VisualEditor'
update = 
	 update_git_repository &&
	 install_ruby_gems



# wmde

[Documents/wmf/wmde/WikidataBrowserTests]
checkout = git clone 'git@github.com:wmde/WikidataBrowserTests.git' 'WikidataBrowserTests'
update = 
	 update_git_repository &&
	 install_ruby_gems



# github

[Documents/github/dotfiles]
checkout = git clone 'git@github.com:zeljkofilipin/dotfiles.git' 'dotfiles'
update = update_git_repository

[Documents/github/filipin]
checkout = git clone 'git@github.com:zeljkofilipin/filipin.git' 'filipin'
update = git pull origin gh-pages

[Documents/github/testingpodcast]
checkout = git clone 'git@github.com:zeljkofilipin/testingpodcast.git' 'testingpodcast'
update = git pull origin gh-pages

[Documents/github/viaqa]
checkout = git clone 'git@github.com:zeljkofilipin/viaqa.git' 'viaqa'
update = git pull origin gh-pages

[Documents/github/watirbook]
checkout = git clone 'git@github.com:watir/watirbook.git' 'watirbook'
update = update_git_repository

